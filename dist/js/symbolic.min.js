/*
 *  symbolic - v1.0.0
 *  A symbol picker jQuery plugin.
 *  https://github.com/AlekseiS/symbolic
 *  Made by Aleksei
 */
!function(a){"use strict";function b(b,e){this.element=b,this.settings=a.extend({},d,e),this._name=c,this._doc=b.ownerDocument,this._boundElement=a(b),this._containerVisible=!1,this._preview=a(this.settings.previewTemplate),this._container=a(this.settings.containerTemplate,this._doc),this._appendTo=a("body"),this._current=this.settings.palette[0][0],this.init()}var c="symbolic",d={previewTemplate:["<div class='sp-replacer'>","<div class='sp-preview'><span class='sp-preview-inner'></span></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),containerTemplate:["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","</div>"].join(""),palette:[["ðŸ˜‚","ðŸ˜…","ðŸ˜„","ðŸ˜†","ðŸ˜€"],["ðŸ˜¹","ðŸ˜¸","ðŸ˜¼","ðŸ˜"]]};a.extend(b.prototype,{init:function(){console.log("Started init"),this._preview.bind("click."+this._name+" touchstart."+this._name,a.proxy(this.previewClick,this)),this._boundElement.append(this._preview),this.populateContainer(this._container),this._appendTo.append(this._container),this._container.offset(this.getOffset(this._container,this._preview)),this._container.delegate(".sp-thumb-el","click."+this._name,a.proxy(this.paletteCellClick,this)),this._container.click(this.stopPropagation),this.set(this._current),console.log("Finished init")},toggle:function(){console.log("toggle()"),this._containerVisible?this.hide():this.show()},show:function(){console.log("show()"),this._containerVisible=!0,a(this._doc).bind("click."+this._name,a.proxy(this.clickout,this)),this._preview.addClass("sp-active"),this._container.removeClass("sp-hidden")},hide:function(){console.log("hide()"),this._containerVisible=!1,this._container.addClass("sp-hidden"),this._preview.removeClass("sp-active"),a(this._doc).unbind("click."+this._name,a.proxy(this.clickout,this))},stopPropagation:function(a){a.stopPropagation()},getOffset:function(b,c){var d=0,e=b.outerWidth(),f=b.outerHeight(),g=c.outerHeight(),h=b[0].ownerDocument,i=h.documentElement,j=i.clientWidth+a(h).scrollLeft(),k=i.clientHeight+a(h).scrollTop(),l=c.offset();return l.top+=g,l.left-=Math.min(l.left,l.left+e>j&&j>e?Math.abs(l.left+e-j):0),l.top-=Math.min(l.top,l.top+f>k&&k>f?Math.abs(f+g-d):d),l},get:function(){return console.log("get()"),this._current},set:function(a){console.log("set()"),this._current=a,this._preview.find(".sp-preview-inner").text(a)},populateContainer:function(a){for(var b=[],c=this.settings.palette,d=0;d<c.length;d++)b.push(this.populateRow(c[d]));a.find(".sp-palette").append(b.join(""))},populateRow:function(a){for(var b=[],c=0;c<a.length;c++)b.push("<span class='sp-thumb-el'>"+a[c]+"</span>");return"<div class='sp-cf'>"+b.join("")+"</div>"},clickout:function(a){console.log("clickout()"),2!==a.button&&this.hide()},paletteCellClick:function(b){console.log("paletteCellClick"),this.set(a(b.target).closest(".sp-thumb-el").text()),this.hide(),b.stopPropagation()},previewClick:function(a){console.log("previewClick()"),this.toggle(),a.stopPropagation()}}),a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery,window,document);